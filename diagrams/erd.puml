@startuml

entity songplays{
    songplay_id : SERIAL <<PK>>
    --
    start_time : long <<NOT NULL>>
    user_id : int <<FK>>
    level : char(4) <<NOT NULL>> <<free|paid>>
    song_id : varchar <<FK>>
    artist_id : varchar <<FK>>
    session_id : int <<NOT NULL>>
    location : varchar
    user_agent : varchar <<NOT NULL>>
}

entity users{
    user_id : int <<PK>>
    --
    first_name : varchar <<NOT NULL>>
    last_name : varchar <<NOT NULL>>
    gender : char(1) <<NOT NULL>> <<M|F>>
    level : char(4) <<NOT NULL>> <<free|paid>>
}

entity artists{
    artist_id : varchar <<PK>>
    --
    name : varchar <<NOT NULL>>
    location : varchar
    latitude : float
    longitude : float
}

entity time{
    start_time : long <<NOT NULL>>
    hour : int <<NOT NULL>>
    day : int <<NOT NULL>>
    week : int <<NOT NULL>>
    month : int <<NOT NULL>>
    year : int <<NOT NULL>>
    weekday : varchar <<NOT NULL>>
}

entity songs{
    song_id : string <<PK>>
    --
    artist_id : varchar <<FK>>
    year : int
    duration : float <<NOT NULL>>
    title : varchar <<NOT NULL>>
}

songplays }o--|| users
songplays }o--|| songs 
songplays }o--|| artists
songs }|--|{ artists

@enduml